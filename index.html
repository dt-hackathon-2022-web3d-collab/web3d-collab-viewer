<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + React</title>

    <!-- NT -->
    <script type="module" crossorigin src="/assets/index.3e1f8917.js"></script>
    <link rel="stylesheet" href="/assets/index.8695bc69.css">
  </head>
  <body>

    <!-- NT -->
    <script>
      // hack for simple-peer
      window.global = window;
      var parcelRequire;
    </script>

    <!-- <div id="root">


    </div> -->
    <script type="module" src="/src/main.jsx"></script>


    <div id="content">
      <needle-engine>
        <div class="loading"></div>
        <div id="overlay" class="overlay ar desktop">
        </div>
        <!--<div class="overlay ar desktop" id="forma-selection"></div>-->
      </needle-engine>
    </div>
  </body>

  <script type="text/javascript">
    let cartier_api, context, viewer;

    document.addEventListener("DOMContentLoaded", async () => {
      setup();
    });
    document.addEventListener("load", async () => {
      setup();
    });
    async function setup() {
      try {
        if (viewer && context && cartier_api) return;
        viewer = document.querySelector("needle-engine");
        console.log(viewer);
        if(!viewer) return;
        context = await viewer?.getContext();
        if(!context) return;
        cartier_api = viewer.GameObject.findObjectOfType("CartierViewer");

        console.log(context);

        setTimeout(() => {
          const currentCameraPosition = context.mainCameraComponent._cam.position;
          // context.moveCameraTo(currentCameraPosition.multiplyScalar(-1));
        }, 5000);      }
      catch (err) {
        console.error(err);
        setTimeout(() => {
          setup();
        }, 1000)
      }
    }
  </script>
</html>
